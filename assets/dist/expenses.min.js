import{_ as T,o as l,c as i,n as f,a as t,t as d,g as m,w as j,F as x,r as y,i as g,v as A,j as b,k as E,l as v,d as w,H as M,e as C,m as B,f as V,h as I}from"./plugin-vue_export-helper.min.js";import{C as F,R as S}from"./RemoveAlert.min.js";import{T as U}from"./VueSearchSelect.min.js";import{V as W}from"./vue-datepicker.min.js";import{f as N,g as O,b as R,s as X}from"./api.min.js";const q={data(){const s=window.myEasyComptaAdmin.easyComptaTranslations;return{loadingBtn:!1,formData:{amount:"",expense_date:"",client_id:"",category_id:"",attachment:null,note:""},options:{clients:[],categories:[]},fields:{expense_date:{label:s.expense_date},client_id:{label:s.client},amount:{label:s.amount},category_id:{label:s.category}},toast:{visible:!1,message:"",type:"alert-success",position:"toast-bottom toast-end"}}},computed:{translations(){return window.myEasyComptaAdmin.easyComptaTranslations}},methods:{async fetchOptions(){try{const s=await fetch("/wp-json/my-easy-compta/v1/expenses/clients",{headers:{"X-WP-Nonce":myEasyComptaAdmin.nonce}}),e=await fetch("/wp-json/my-easy-compta/v1/expenses/categories",{headers:{"X-WP-Nonce":myEasyComptaAdmin.nonce}});if(e.ok){const r=await e.json();this.options.categories=r;const p=await s.json();this.options.clients=p}else this.showToast("Erreur lors de la r\xE9cup\xE9ration des cat\xE9gories","alert-error"),console.error("Erreur lors de la r\xE9cup\xE9ration des cat\xE9gories")}catch(s){this.showToast(s,"alert-error"),console.error("Erreur lors de la r\xE9cup\xE9ration des options:",s)}},async submitForm(){this.loadingBtn=!0;const s=new FormData;s.append("amount",this.formData.amount),s.append("expense_date",this.formData.expense_date),s.append("client_id",this.formData.client_id),s.append("category_id",this.formData.category_id),this.$refs.attachment.files[0]&&s.append("attachment",this.$refs.attachment.files[0]),s.append("note",this.formData.note);try{const e=await fetch("/wp-json/my-easy-compta/v1/expenses",{method:"POST",body:s,headers:{"X-WP-Nonce":myEasyComptaAdmin.nonce}}),r=await e.json();e.ok?(this.loadingBtn=!1,this.$emit("expenseAdded"),this.showToast(r.message,"alert-success"),this.resetForm(),this.closeModal()):(this.showToast(r.message||"Erreur lors de l'ajout de la d\xE9pense","alert-error"),console.error("Erreur lors de l'ajout de la d\xE9pense"),this.loadingBtn=!1)}catch(e){this.showToast(e,"alert-error"),console.error("Erreur lors de l'ajout de la d\xE9pense:",e),this.loadingBtn=!1}},showToast(s,e){this.toast.message=s,this.toast.type=e,this.toast.visible=!0,setTimeout(()=>{this.toast.visible=!1},3e3)},closeModal(){document.getElementById("modal_expenses").close()},resetForm(){this.formData={amount:"",expense_date:"",client_id:"",category_id:"",attachment:null,note:""},this.$refs.attachment.value=null}},mounted(){this.fetchOptions()}},z={id:"modal_expenses",class:"modal"},L={class:"modal-box"},H={class:"font-bold text-lg"},K={class:"grid grid-cols-2 gap-4"},Q=["for"],Y=["type","id","onUpdate:modelValue"],Z=["id"],G=["value"],J={value:""},$=["value"],ee={class:"ecwp-group form-group relative"},te={for:"attachment",class:"ecwp-label form-label"},se={type:"file",id:"attachment",ref:"attachment",class:"ecwp-input input input-bordered w-full peer"},ne={class:"ecwp-group form-group mt-4 relative"},oe={for:"note",class:"ecwp-label form-label"},ae={class:"form-group mt-4 flex justify-end"},le=["disabled"],ie={key:0,class:"loading loading-spinner loading-sm"};function re(s,e,r,p,n,a){return l(),i("div",null,[n.toast.visible?(l(),i("div",{key:0,class:f(["toast",n.toast.position]),style:{zIndex:9999}},[t("div",{class:f(["alert",n.toast.type,"text-white"])},[t("span",null,d(n.toast.message),1)],2)],2)):m("",!0),t("dialog",z,[t("div",L,[t("h3",H,d(a.translations.add),1),t("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",onClick:e[0]||(e[0]=(..._)=>a.closeModal&&a.closeModal(..._))}," \u2715 "),t("form",{onSubmit:e[5]||(e[5]=j((..._)=>a.submitForm&&a.submitForm(..._),["prevent"]))},[t("div",K,[(l(!0),i(x,null,y(n.fields,(_,u)=>(l(),i("div",{key:u,class:"ecwp-group form-group"},[t("label",{for:u,class:f(["ecwp-label form-label",u==="client_id"?"label-search":""])},d(_.label),11,Q),u!=="category_id"&&u!=="client_id"&&u!=="expense_date"?g((l(),i("input",{key:0,type:_.type||"text",id:u,"onUpdate:modelValue":c=>n.formData[u]=c,class:f(["ecwp-input input","input-bordered",_.class||"w-full"])},null,10,Y)),[[A,n.formData[u]]]):m("",!0),u==="category_id"?g((l(),i("select",{key:1,id:u,"onUpdate:modelValue":e[1]||(e[1]=c=>n.formData.category_id=c),class:f(["ecwp-input input","input-bordered",_.class||"w-full"])},[(l(!0),i(x,null,y(n.options.categories,c=>(l(),i("option",{key:c.id,value:c.id},d(c.name),9,G))),128))],10,Z)),[[b,n.formData.category_id]]):m("",!0),u==="client_id"?g((l(),i("select",{key:2,id:"client_id","onUpdate:modelValue":e[2]||(e[2]=c=>n.formData.client_id=c),class:"ecwp-input input input-bordered w-full peer"},[t("option",J,d(a.translations.select_client),1),(l(!0),i(x,null,y(n.options.clients,c=>(l(),i("option",{key:c.id,value:c.id},d(c.company_name),9,$))),128))],512)),[[b,n.formData.client_id]]):m("",!0),u=="expense_date"?g((l(),i("input",{key:3,type:"date",id:"expense_date","onUpdate:modelValue":e[3]||(e[3]=c=>n.formData.expense_date=c),class:"ecwp-input input input-bordered w-full peer",placeholder:"Date de d\xE9pense",required:""},null,512)),[[E,n.formData.expense_date]]):m("",!0)]))),128))]),t("div",ee,[t("label",te,d(a.translations.attached_file),1),t("input",se,null,512)]),t("div",ne,[t("label",oe,d(a.translations.note),1),g(t("textarea",{id:"note","onUpdate:modelValue":e[4]||(e[4]=_=>n.formData.note=_),class:"ecwp-input textarea textarea-bordered w-full peer",rows:"4",placeholder:"Note"},null,512),[[E,n.formData.note]])]),t("div",ae,[t("button",{type:"submit",class:"btn btn-primary rounded-full",disabled:n.loadingBtn},[v(d(a.translations.add)+" ",1),n.loadingBtn?(l(),i("span",ie)):m("",!0)],8,le)])],32)])])])}var de=T(q,[["render",re]]);const ce={components:{ModelSelect:U,VueDatePicker:W},props:{loading:{type:Boolean,default:!1},showModal:{type:Boolean,default:!1},modalId:{type:String,required:!0},modalTitle:{type:String,default:""},expense:{type:Object,default:()=>({id:null,expense_date:"",client_id:"",amount:"",category_id:"",notes:""})},categories:Array,clients:Array},data(){const s=window.myEasyComptaAdmin.easyComptaTranslations;return{editedExpense:{...this.expense},loadingBtn:!1,clientOptions:[],toast:{visible:!1,message:"",type:"alert-success",position:"toast-bottom toast-end"},fields:{expense_date:{label:s.expense_date},client_id:{label:s.client},amount:{label:s.amount},category_id:{label:s.category}}}},computed:{translations(){return window.myEasyComptaAdmin.easyComptaTranslations},formattedDate(){return s=>{if(!s)return"";const e=s.getDate().toString().padStart(2,"0"),r=(s.getMonth()+1).toString().padStart(2,"0"),p=s.getFullYear();return`${e}-${r}-${p}`}},skeletonItems(){return Array.from({length:10},(s,e)=>e)},categoriesExpenses(){return this.categories},clients(){return this.clients}},methods:{closeModal(){document.getElementById(this.modalId).close()},async submitForm(){this.loadingBtn=!0;try{const s=await fetch(`/wp-json/my-easy-compta/v1/expenses/${this.editedExpense.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-WP-Nonce":myEasyComptaAdmin.nonce},body:JSON.stringify(this.editedExpense)});if(s.ok){const e=await s.json();this.closeModal(),this.showToast(e.message,"alert-success"),this.$emit("expenseEdited"),this.loadingBtn=!1}else{const e=`Error editing expense: ${s.statusText}`;this.showToast(e,"alert-error"),console.error(e),this.loadingBtn=!1}}catch(s){const e=s.response&&s.response.data&&s.response.data.message?s.response.data.message:"Error editing expense";this.showToast(e,"alert-error"),console.error("Error editing expense:",s),this.loadingBtn=!1}},showToast(s,e){this.toast.message=s,this.toast.type=e,this.toast.visible=!0,setTimeout(()=>{this.toast.visible=!1},3e3)}},watch:{expense:{handler(s){this.editedExpense={...s}},immediate:!0}}},pe=["id","open"],ue={class:"modal-box"},me={class:"font-bold text-lg"},he={key:0},_e={class:"grid grid-cols-2 gap-4"},fe=t("div",{class:"skeleton h-4 w-full mb-2"},null,-1),ge=t("div",{class:"skeleton h-4 w-full"},null,-1),xe=[fe,ge],ye={class:"grid grid-cols-2 gap-4"},we=["for"],be=["type","id","onUpdate:modelValue"],ve=["id"],Ee=["value"],Ce={class:"ecwp-group form-group mt-4"},ke={for:"note",class:"ecwp-label form-label"},Pe={class:"form-group mt-4 flex justify-end"},Te=["disabled"],De={key:0,class:"loading loading-spinner loading-sm"};function Me(s,e,r,p,n,a){const _=w("model-select"),u=w("VueDatePicker");return l(),i("div",null,[n.toast.visible?(l(),i("div",{key:0,class:f(["toast",n.toast.position]),style:{zIndex:9999}},[t("div",{class:f(["alert",n.toast.type,"text-white"])},[t("span",null,d(n.toast.message),1)],2)],2)):m("",!0),t("dialog",{id:r.modalId,class:"modal",open:r.showModal},[t("div",ue,[t("h3",me,d(r.modalTitle),1),t("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",onClick:e[0]||(e[0]=(...c)=>a.closeModal&&a.closeModal(...c))}," \u2715 "),r.loading?(l(),i("div",he,[t("div",_e,[(l(!0),i(x,null,y(a.skeletonItems,c=>(l(),i("div",{key:c,class:"py-2"},xe))),128))])])):(l(),i("form",{key:1,onSubmit:e[5]||(e[5]=j((...c)=>a.submitForm&&a.submitForm(...c),["prevent"])),class:"form"},[t("div",ye,[(l(!0),i(x,null,y(n.fields,(c,h)=>(l(),i("div",{key:h,class:"ecwp-group form-group"},[t("label",{for:h,class:f(["ecwp-label form-label",h==="client_id"?"label-search":""])},d(c.label),11,we),h!=="category_id"&&h!=="client_id"&&h!=="expense_date"?g((l(),i("input",{key:0,type:c.type||"text",id:h,"onUpdate:modelValue":o=>n.editedExpense[h]=o,class:f(["ecwp-input input","input-bordered",c.class||"w-full"])},null,10,be)),[[A,n.editedExpense[h]]]):m("",!0),h==="category_id"?g((l(),i("select",{key:1,id:h,"onUpdate:modelValue":e[1]||(e[1]=o=>n.editedExpense.category_id=o),class:f(["ecwp-input input","input-bordered",c.class||"w-full"])},[(l(!0),i(x,null,y(a.categoriesExpenses,o=>(l(),i("option",{key:o.id,value:o.id},d(o.name),9,Ee))),128))],10,ve)),[[b,n.editedExpense.category_id]]):m("",!0),h==="client_id"?(l(),M(_,{key:2,modelValue:n.editedExpense.client_id,"onUpdate:modelValue":e[2]||(e[2]=o=>n.editedExpense.client_id=o),options:a.clients,label:"text","track-by":"value",placeholder:a.translations.select,class:"ecwp-input input input-bordered w-full",required:""},null,8,["modelValue","options","placeholder"])):m("",!0),h=="expense_date"?(l(),M(u,{key:3,class:"ecwp-input ecwp-date input input-bordered w-full",id:"invoiceDate",modelValue:n.editedExpense.expense_date,"onUpdate:modelValue":e[3]||(e[3]=o=>n.editedExpense.expense_date=o),"enable-time-picker":!1,"auto-apply":"",format:a.formattedDate,locale:"fr",required:""},null,8,["modelValue","format"])):m("",!0)]))),128))]),t("div",Ce,[t("label",ke,d(a.translations.note),1),g(t("textarea",{id:"note","onUpdate:modelValue":e[4]||(e[4]=c=>n.editedExpense.notes=c),class:"ecwp-input textarea textarea-bordered w-full",rows:"4"},null,512),[[E,n.editedExpense.notes]])]),t("div",Pe,[t("button",{type:"submit",class:"btn btn-primary rounded-full",disabled:n.loadingBtn},[v(d(a.translations.save)+" ",1),n.loadingBtn?(l(),i("span",De)):m("",!0)],8,Te)])],32))])],8,pe)])}var je=T(ce,[["render",Me]]);const Ae={name:"Expenses",components:{Card:F,AddExpenseModal:de,ExpenseEditModal:je,RemoveModal:S},data(){return{expenses:[],filteredExpenses:[],filters:{client:"",expense_date:"",total_amount:"",category:""},categories_expenses:[],categoriesExpenses:[],listClients:[],clientOptions:[],currentPage:1,totalPages:1,paginationButtons:[],loading:!0,loadingPrice:!0,skeletonRows:5,perPage:10,perPageOptions:[5,10,20,50],settings:[],default_currency_symbol:"",toast:{visible:!1,message:"",type:"alert-success",position:"toast-bottom toast-end"},editExpenseModal:!1,showRemoveModal:!1,selectedExpense:null}},created(){this.fetchExpensesWithFilters(),this.fetchClients(),this.fetchCategoriesExpenses(),this.loadSettings()},methods:{AddNew(){modal_expenses.showModal()},isImage(s){return["jpg","jpeg","png","gif","webp"].includes(s)},fetchExpenses(s=1){this.loading=!0;const{perPage:e}=this;fetch(`/wp-json/my-easy-compta/v1/expenses?page=${s}&per_page=${e}`,{headers:{"X-WP-Nonce":myEasyComptaAdmin.nonce}}).then(r=>r.json()).then(r=>{this.expenses=r.expenses,this.totalPages=r.total_pages,this.currentPage=r.page,this.totalCount=r.total_count,this.perPage=e,this.generatePaginationButtons()}).catch(r=>{console.error("Error fetching expenses:",r)}).finally(()=>{this.loading=!1})},fetchExpensesWithFilters(s=1){this.loading=!0;const{perPage:e,filters:r}=this,p=new URLSearchParams({page:s,per_page:e,...r}).toString();fetch(`/wp-json/my-easy-compta/v1/expenses?${p}`,{headers:{"X-WP-Nonce":myEasyComptaAdmin.nonce}}).then(n=>n.json()).then(n=>{this.expenses=n.expenses,this.totalCount=n.total_count,this.totalPages=n.total_pages,this.currentPage=s,this.perPage=e,this.generatePaginationButtons()}).catch(n=>{console.error("Error fetching expenses with filters:",n)}).finally(()=>{this.loading=!1})},fetchClients(){fetch("/wp-json/my-easy-compta/v1/clients",{headers:{"X-WP-Nonce":myEasyComptaAdmin.nonce}}).then(s=>s.json()).then(s=>{this.clients=s.clients}).catch(s=>{console.error("Error fetching clients:",s)})},fetchCategoriesExpenses(){fetch("/wp-json/my-easy-compta/v1/expenses/categories",{headers:{"X-WP-Nonce":myEasyComptaAdmin.nonce}}).then(s=>s.json()).then(s=>{this.categories_expenses=s}).catch(s=>{console.error("Error fetching categories expenses:",s)})},async loadSettings(){try{this.loadingPrice=!0;const{settings:s,currencySymbol:e,vatData:r}=await N();this.settings=s,this.default_currency_symbol=e,this.default_vat=r,this.loadingPrice=!1}catch(s){this.showToast(s.message,"alert-error"),this.loadingPrice=!1}},generatePaginationButtons(){this.paginationButtons=O(this.currentPage,this.totalPages)},goToPage(s){s!=="..."&&this.fetchExpensesWithFilters(s)},perPageChanged(){this.fetchExpensesWithFilters()},formatAmount(s,e){return R(s,e,this.settings.currency_position)},showToast(s,e){X(this.toast,s,e)},editExpense(s){this.loadingModal=!0,this.editExpenseModal=!0,modal_expense_edit.showModal(),this.fetchExpenseDetails(s)},fetchExpenseDetails(s){fetch(`/wp-json/my-easy-compta/v1/expenses/details/${s}`,{headers:{"X-WP-Nonce":myEasyComptaAdmin.nonce}}).then(e=>e.json()).then(e=>{this.selectedExpense=e,this.categoriesExpenses=e.categories_expenses,this.listClients=e.list_clients,this.clientOptions=this.listClients.map(r=>({value:r.id,text:`${r.company_name}`})),this.loadingModal=!1}).catch(e=>{console.error("Error fetching expense details:",e),this.loadingModal=!1})},confirmDeleteExpense(s){this.selectedExpense=s,modal_remove.showModal(),this.showRemoveModal=!0},deleteExpense(s){this.loading=!0,fetch(`/wp-json/my-easy-compta/v1/expenses/${s}`,{method:"DELETE",headers:{"X-WP-Nonce":myEasyComptaAdmin.nonce}}).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>{e.success?(this.fetchExpenses(),this.showToast(e.message,"alert-success")):(this.showToast(e.message,"alert-error"),console.error("Error deleting expense:",e.statusText))}).catch(e=>{console.error("Error deleting expense:",e)}),this.showRemoveModal=!1}},computed:{translations(){return window.myEasyComptaAdmin.easyComptaTranslations},defaultImage(){return window.myEasyComptaAdmin.pluginUrl+"/assets/img/file.svg"}}},Be={class:"pt-2 pr-4"},Ve={class:"flex justify-between items-center"},Ie={class:"card-title"},Fe=t("i",{class:"fas fa-plus-circle"},null,-1),Se={key:0,class:"ms-2"},Ue={class:"btn btn-outline btn-accent rounded-full hover:text-white",href:"/wp-admin/admin.php?page=my-easy-compta-export#tab5"},We=t("i",{class:"fas fa-file-export"},null,-1),Ne=["data-tip"],Oe={class:"btn btn-outline btn-accent rounded-full",disabled:""},Re=t("i",{class:"fas fa-file-export"},null,-1),Xe=t("div",{class:"divider mt-2"},null,-1),qe={class:"flex items-center mb-4"},ze={for:"perPageSelect",class:"mr-2"},Le=["value"],He={class:"overflow-x-auto"},Ke={class:"table w-full"},Qe={value:""},Ye=["value"],Ze={value:""},Ge=["value"],Je={class:"align-top"},$e={class:"align-top"},et={class:"flex justify-center"},tt={key:0},st={key:0},nt={key:1},ot=t("span",{class:"loading loading-bars loading-sm"},null,-1),at=[ot],lt={key:0,class:"avatar"},it={key:0,class:"w-16 mask mask-squircle"},rt=["href"],dt=["src"],ct={key:1,class:"w-16 mask mask-squircle"},pt=["href"],ut=["src"],mt={class:"flex justify-end"},ht=["data-tip"],_t=["onClick"],ft=t("i",{class:"fas fa-pencil-alt"},null,-1),gt=[ft],xt=["data-tip"],yt=["onClick"],wt=t("i",{class:"far fa-trash-alt"},null,-1),bt=[wt],vt={key:0},Et=t("div",{class:"flex gap-4 items-center"},[t("div",{class:"skeleton w-16 h-16 rounded-full shrink-0"}),t("div",{class:"flex flex-col gap-4 w-full"},[t("div",{class:"skeleton h-4 w-full"}),t("div",{class:"skeleton h-4 w-full"})])],-1),Ct=t("div",{class:"divider my-1"},null,-1),kt=[Et,Ct],Pt={class:"join ecwp_pagination mt-6 pt-4"},Tt=["onClick"];function Dt(s,e,r,p,n,a){const _=w("AddExpenseModal"),u=w("expense-edit-modal"),c=w("remove-modal"),h=w("Card");return l(),i("div",Be,[n.toast.visible?(l(),i("div",{key:0,class:f(["toast",n.toast.position]),style:{zIndex:9999}},[t("div",{class:f(["alert",n.toast.type,"text-white"])},[t("span",null,d(n.toast.message),1)],2)],2)):m("",!0),C(_,{onExpenseAdded:a.fetchExpenses},null,8,["onExpenseAdded"]),C(u,{loading:n.loading,"show-modal":n.editExpenseModal,"modal-id":"modal_expense_edit","modal-title":a.translations.edit_expense,expense:n.selectedExpense,categories:n.categoriesExpenses,clients:n.clientOptions,onExpenseEdited:a.fetchExpenses},null,8,["loading","show-modal","modal-title","expense","categories","clients","onExpenseEdited"]),C(c,{"show-modal":n.showRemoveModal,title:a.translations.are_you_sure,message:a.translations.no_turning_back,confirmText:a.translations.yes_delete_it,cancelText:a.translations.cancel,onConfirm:e[0]||(e[0]=o=>this.deleteExpense(n.selectedExpense)),onCancel:e[1]||(e[1]=o=>n.showRemoveModal=!1)},null,8,["show-modal","title","message","confirmText","cancelText"]),C(h,{topMargin:"mt-8"},{default:B(()=>[t("div",Ve,[t("h2",Ie,d(a.translations.expenses),1),t("div",null,[t("button",{class:"btn btn-primary rounded-full",onClick:e[2]||(e[2]=(...o)=>a.AddNew&&a.AddNew(...o))},[v(d(a.translations.add)+" ",1),Fe]),n.settings.easy_compta_export_addon_active==1?(l(),i("span",Se,[t("a",Ue,[v(d(a.translations.export)+" ",1),We])])):(l(),i("span",{key:1,class:"tooltip tooltip-left tooltip-warning ms-2","data-tip":a.translations.active_export_addon},[t("button",Oe,[v(d(a.translations.export)+" ",1),Re])],8,Ne))])]),Xe,t("div",qe,[t("label",ze,d(a.translations.display_per_page),1),g(t("select",{id:"perPageSelect","onUpdate:modelValue":e[3]||(e[3]=o=>n.perPage=o),onChange:e[4]||(e[4]=(...o)=>a.perPageChanged&&a.perPageChanged(...o))},[(l(!0),i(x,null,y(n.perPageOptions,o=>(l(),i("option",{key:o,value:o},d(o),9,Le))),128))],544),[[b,n.perPage]])]),t("div",He,[t("table",Ke,[t("thead",null,[t("tr",null,[t("th",null,[t("div",null,d(a.translations.expense_date),1),g(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>n.filters.expense_date=o),onInput:e[6]||(e[6]=o=>a.fetchExpensesWithFilters()),type:"date",class:"ecwp-input input-xs input-bordered mt-2"},null,544),[[E,n.filters.expense_date]])]),t("th",null,[t("div",null,d(a.translations.amount),1),g(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>n.filters.total_amount=o),onInput:e[8]||(e[8]=o=>a.fetchExpensesWithFilters()),type:"text",class:"ecwp-input input-xs input-bordered mt-2"},null,544),[[E,n.filters.total_amount]])]),t("th",null,[t("div",null,d(a.translations.client),1),g(t("select",{"onUpdate:modelValue":e[9]||(e[9]=o=>n.filters.client=o),onChange:e[10]||(e[10]=o=>a.fetchExpensesWithFilters()),class:"ecwp-input input-xs input-bordered mt-2"},[t("option",Qe,d(a.translations.all),1),(l(!0),i(x,null,y(s.clients,o=>(l(),i("option",{key:o.id,value:o.company_name},d(o.company_name),9,Ye))),128))],544),[[b,n.filters.client]])]),t("th",null,[t("div",null,d(a.translations.category),1),g(t("select",{"onUpdate:modelValue":e[11]||(e[11]=o=>n.filters.category=o),onChange:e[12]||(e[12]=o=>a.fetchExpensesWithFilters()),class:"ecwp-input input-xs input-bordered mt-2"},[t("option",Ze,d(a.translations.all),1),(l(!0),i(x,null,y(n.categories_expenses,o=>(l(),i("option",{key:o.id,value:o.name},d(o.name),9,Ge))),128))],544),[[b,n.filters.category]])]),t("th",Je,d(a.translations.attachment),1),t("th",$e,d(a.translations.note),1),t("th",et,d(a.translations.actions),1)])]),n.loading?m("",!0):(l(),i("tbody",tt,[(l(!0),i(x,null,y(n.expenses,o=>(l(),i("tr",{key:o.id},[t("td",null,d(o.expense_date),1),t("td",null,[n.loadingPrice?(l(),i("div",nt,at)):(l(),i("div",st,[t("span",null,d(a.formatAmount(o.amount,n.default_currency_symbol)),1)]))]),t("td",null,d(o.company_name),1),t("td",null,d(o.name),1),t("td",null,[o.attachment_url?(l(),i("div",lt,[a.isImage(o.type)?(l(),i("div",it,[t("a",{href:o.attachment_url,target:"_blank"},[t("img",{src:o.attachment_url},null,8,dt)],8,rt)])):(l(),i("div",ct,[t("a",{href:o.attachment_url,target:"_blank"},[t("img",{src:a.defaultImage},null,8,ut)],8,pt)]))])):m("",!0)]),t("td",null,d(o.notes),1),t("td",mt,[t("span",{class:"lg:tooltip","data-tip":a.translations.edit},[t("button",{onClick:D=>a.editExpense(o.id),class:"btn btn-circle mx-1"},gt,8,_t)],8,ht),t("span",{class:"lg:tooltip","data-tip":a.translations.delete},[t("button",{onClick:D=>a.confirmDeleteExpense(o.id),class:"btn btn-circle text-red-500 hover:text-red-700 mx-1"},bt,8,yt)],8,xt)])]))),128))]))]),n.loading?(l(),i("div",vt,[(l(!0),i(x,null,y(n.skeletonRows,o=>(l(),i("div",{key:o,class:"flex flex-col gap-4 w-full"},kt))),128))])):m("",!0),t("div",Pt,[(l(!0),i(x,null,y(n.paginationButtons,o=>(l(),i("button",{key:o,class:f(["join-item btn",{"btn-disabled":o==="..."||o===n.currentPage}]),onClick:D=>a.goToPage(o)},d(o),11,Tt))),128))])])]),_:1})])}var Mt=T(Ae,[["render",Dt]]);const jt=P;(function(s,e){const r=P,p=s();for(;[];)try{if(-parseInt(r(413))/1+parseInt(r(420))/2*(parseInt(r(417))/3)+-parseInt(r(415))/4+parseInt(r(418))/5+-parseInt(r(422))/6+-parseInt(r(423))/7*(-parseInt(r(419))/8)+parseInt(r(414))/9*(parseInt(r(421))/10)===e)break;p.push(p.shift())}catch{p.push(p.shift())}})(k,494960);function k(){const s=["375244dKuwKd","#my-easy-compta-expenses-app","3327mfwuNq","315945ctWbFW","389400nQNwFb","258bZQOfN","390OGfcAP","5798964kalruh","84qiRDBw","157240vHBYdD","212805RFmOuZ"];return k=function(){return s},k()}function P(s,e){const r=k();return P=function(p,n){return p=p-413,r[p]},P(s,e)}const At=V({render:()=>I(Mt)});At.mount(jt(416));
